1. scheduler.py 引用不存在的 job（需要改代码）

当前 scheduler.py 里：

from data.jobs import job_update_ohlc, job_collect_ticks_once, job_finalize_ticks_and_levels
...
def run_post_close_jobs() -> None:
    ...
    ensure_stock_basic_a_share()
    job_update_ohlc(td)
    job_collect_ticks_once(td, limit=None)
    job_finalize_ticks_and_levels(td)


但在 data/jobs.py 中：

有 job_update_ohlc(trade_date)

有 job_collect_full_day_ticks(trade_date)

有 job_finalize_ticks_and_levels(trade_date)

没有 job_collect_ticks_once

也就是说：scheduler 现在跑起来会 ImportError。

✅ 建议修改

根据 jobs.py 的实现，你应该想要的是「收盘后全市场 full-day tick」，那就把调度器改成用 job_collect_full_day_ticks：

# scheduler.py
from data.basic_universe import ensure_stock_basic_a_share
from data.jobs import (
    job_update_ohlc,
    job_collect_full_day_ticks,      # ✅ 改成这个
    job_finalize_ticks_and_levels,
)

def run_post_close_jobs() -> None:
    td = date.today()
    if not is_trading_day(td):
        print(f"{td} is not trading day, skip jobs.")
        return
    ensure_stock_basic_a_share()
    job_update_ohlc(td)
    job_collect_full_day_ticks(td)    # ✅ 去掉 limit 这个参数
    job_finalize_ticks_and_levels(td)


然后可以给 jobs.py 里 job 的 docstring 顺便更新一下（把 job_collect_ticks_once 改成 job_collect_full_day_ticks），避免以后混淆。

2. 对本地 config.py 的硬依赖（设计没问题，但建议补模板）

很多模块都写了：

from config import (
    DATABASE_URL,
    TICK_BASE_DIR,
    MARKET_SZ, MARKET_SH,
    STOCK_POOL_LIMIT, TICK_COUNT_LIMIT,
    Settings,
)


而 .gitignore 里忽略了 config.py：

config.py
data/tick/*


这意味着：

repo 本身是无法直接跑的，必须你本地提供 config.py

对第三方/未来自己回头看，门槛会比较高

✅ 建议

在仓库里加一个 config_example.py（或 config_template.py），示意出必须提供的字段 & 类型，例如：

# config_example.py
from dataclasses import dataclass

DATABASE_URL = "postgresql+psycopg2://user:pass@host:5432/quant"
TICK_BASE_DIR = "/data/ticks"

# pytdx 市场号
MARKET_SZ = 0
MARKET_SH = 1

# 全市场限制
STOCK_POOL_LIMIT = None      # 或者 500
TICK_COUNT_LIMIT = 20000

@dataclass
class Settings:
    stock_pool_limit: int | None = STOCK_POOL_LIMIT
    tick_count_limit: int = TICK_COUNT_LIMIT
    tick_base_dir: str = TICK_BASE_DIR


在 README 里写一句：

拷贝 config_example.py 为 config.py，按自己环境修改。

长期可以考虑用 .env + pydantic 或 python-dotenv 做配置管理，但不是当下刚需。